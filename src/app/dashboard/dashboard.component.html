<div class="container" [ngClass]="{ 'dark-mode': isDarkMode }">
  <app-sidebar></app-sidebar>

  <section class="dashboard-stats">
    <!-- En-tête -->
    <div class="dashboard-header">
      <div>
        <h2><span class="material-icons">bar_chart</span> Tableau de bord</h2>
        <br>
        <p class="subtitle">Aperçu global de votre plateforme e-learning</p>
      </div>
   
      <button (click)="toggleDarkMode()" class="mode-toggle" mat-icon-button>
 
           <span class="material-icons">{{ isDarkMode ? 'light_mode' : 'dark_mode' }}</span>
         
      </button>
    </div>

    <!-- Statistiques principales -->
    <div class="stats-grid">
      <div class="stat-card" *ngFor="let stat of stats" [ngClass]="stat.colorClass">
        <span class="material-icons icon">{{ stat.icon }}</span>
        <div>
          <h3>{{ stat.label }}</h3>
          <p>{{ stat.count }}</p>
        </div>
      </div>
    </div>

    <!-- Taux de réussite -->
    <div class="progress-container">
      <h3><span class="material-icons">show_chart</span> Taux de réussite global</h3>
      <canvas id="circleChart" width="120" height="120"></canvas>
      <p class="progress-description">Amélioration par rapport au mois dernier : <strong>+8%</strong></p>
    </div>

    <!-- Répartition des utilisateurs (version moderne avec animation) -->
    <div class="charts-section">
      <h3><span class="material-icons">group</span> Répartition des utilisateurs</h3>
      <div class="user-distribution">
        <div class="bar-container" matTooltip="Formateurs (40%)">
          <div class="bar formateur" style="height: 80%;">
            <span>Formateurs</span>
          </div>
        </div>
        <div class="bar-container" matTooltip="Candidats (30%)">
          <div class="bar candidat" style="height: 60%;">
            <span>Candidats</span>
          </div>
        </div>
        <div class="bar-container" matTooltip="Admins (20%)">
          <div class="bar admin" style="height: 40%;">
            <span>Admins</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Prochaine session -->
    <div class="next-session-card">
      <h3><span class="material-icons">event</span> Prochaine formation</h3>
      <p><strong>Angular Avancé</strong> – 15 avril 2025</p>
      <p>Formateur : <span class="highlight">Zribi manar</span></p>
      <button mat-raised-button color="primary">S'inscrire</button>
    </div>

    <!-- Astuce du jour améliorée -->
    <div class="motivation-card">
      <h3><span class="material-icons">lightbulb</span> Astuce du jour</h3>
      <blockquote>
        « La constance bat le talent quand le talent ne travaille pas dur. »
        <footer>— Coach Motivation</footer>
      </blockquote>
    </div>

    <!-- Support -->
    <div class="support-card">
      <h3><span class="material-icons">support_agent</span> Assistance</h3>
      <p>Besoin d’aide ? <br>Contactez-nous à
        <a href="mailto:support@e-learning.com">amine.zadi03@gmail.com</a>
      </p>
      <button mat-stroked-button color="accent">Centre d’aide</button>
    </div>
  </section>
</div>